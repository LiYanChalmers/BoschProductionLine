!function(a,i){"use strict";var o=Plotly.d3,s=i.Embed=function(){var e=this;e.inited=!1,e.initPromise=new Promise(function(t){e.resolveInit=t}),e.isReady=!1,e.readyPromise=new Promise(function(t){e.resolveReady=t}),e.graphDiv=o.select("#embedded-graph").node(),e.graphDiv.fid=o.select("#plot-fid").text(),e.graphDiv.fn=o.select("#plot-filename").text(),e.layout=null,e.plotResizeTimeout=null,e.externalScripts=[],e.svgContainer=null,e.initialAutosize=null,e.initialWidth=null,e.initialHeight=null},r=s.prototype;r.getRavenConfig=function(){var t={};return t.tags={host:location.host,server:"browser",ie:this.getIEVersion()},t},r.getLayoutAutosize=function(){switch(o.select("#plot-autosize").text()){case"true":return!0;case"false":return!1;default:return null}},r.getLayoutWidth=function(){var t=o.select("#plot-width").text();return t=parseInt(t,10),isNaN(t)?null:t},r.getLayoutHeight=function(){var t=o.select("#plot-height").text();return t=parseInt(t,10),isNaN(t)?null:t},r.getData=function(){return JSON.parse(o.select("#plot-data").text())},r.getLayout=function(){var t=this;if(t.layout)return t.layout;var e=JSON.parse(o.select("#plot-layout").text()),n=t.getLayoutAutosize(),a=t.getLayoutWidth(),i=t.getLayoutHeight();return null!==a||null!==i?(a&&(e.width=a),i&&(e.height=i),e.autosize=!1):null!==n&&(e.autosize=n),t.initialAutosize=e.autosize,t.initialWidth=e.width,t.initialHeight=e.height,e.autosize&&(delete e.width,delete e.height),e},r.getFrames=function(){return JSON.parse(o.select("#plot-frames").text())},r.getDisplayLogo=function(){return"true"===o.select("#plot-logo").text()},r.getDisplayModeBar=function(){switch(o.select("#plot-modebar").text()){case"false":return!1;case"hover":return"hover";default:return!0}},r.getMapboxAccessToken=function(){return o.select("#plot-mapbox-access-token").text()},r.getDisplayLink=function(){return"true"===o.select("#plot-link").text()},r.getIEVersion=function(){return document.documentMode?document.documentMode:0},r.stopLoading=function(){o.select("#plotlybars").remove()},r.initStream=function(t,e){if("undefined"!=typeof StreamHead){var n=new StreamHead(e,t,{autoreload:!0});n.init(),n.connect({host:a.WEBSOCKET_HOST,port:a.WEBSOCKET_PORT})}},r.initPostMessage=function(){var e=this;i.addEventListener("message",function(t){e.onMessage(t,e)})},r.isShareplot=function(){if(i.self===i.top)return!1;try{var t=i.location.href;return 0===i.parent.location.href.indexOf(t.split(".embed")[0])}catch(t){return!1}},r.getConfig=function(){var t=this.isShareplot(),e=i===i.top,n=document.body.style;return{displaylogo:this.getDisplayLogo(),displayModeBar:this.getDisplayModeBar(),mapboxAccessToken:this.getMapboxAccessToken(),autosizable:!0,fillFrame:!0,sendData:!1,showLink:this.getDisplayLink(),scrollZoom:t,setBackground:e?function(t,e){n.backgroundColor=Plotly.Color.combine(e,"white"),n.backgroundColor||(n.backgroundColor="white")}:function(t,e){n.backgroundColor=e,n.backgroundColor||(n.backgroundColor="white")}}},r.init=function(){if(!this.inited){var t=!0;-1!==i.location.href.indexOf("link=false")&&(t=!1),t&&(document.getElementById("js-edit-link").style.display="block");var e=this;return e.data=e.getData(),e.layout=e.getLayout(),e.frames=e.getFrames(),e.config=e.getConfig(),e.inited=!0,e.resolveInit(),e.initialPlot()}},r.setUp=function(){var t=this;t.initPostMessage(),document.addEventListener("DOMContentLoaded",function(){Raven.context(t.getRavenConfig(),function(){t.init()})})},r.initialPlot=function(){var e=this,a=e.graphDiv;return new Promise(function(t){if(100<a.clientWidth)t();else var e=0,n=setInterval(function(){e+=50,(100<a.clientWidth||3e3<e)&&(clearInterval(n),t())},50)}).then(function(){var t=Plotly.plot(a,{data:e.data,layout:e.layout,frames:e.frames,config:e.config});return e.isReady=!0,e.resolveReady(),t}).then(function(){return e.stopLoading(),e.svgContainer=o.select(a).select(".svg-container"),i.addEventListener("resize",function(){e.resizePlot()}),o.select("html").classed("is-iframe",!0),e.svgContainer.style("margin","auto"),e.initStream(a,Plotly),Plotly.Breakpoints.apply(a)}).then(function(){return Plotly.Plots.redrawText(a)})},r.resizePlot=function(){var t=this,e=t.graphDiv;return t.afterReady(function(){if(t.layout.autosize)return delete t.layout.width,delete t.layout.height,Plotly.Plots.resize(e).then(function(){return e.style.background="none",Plotly.Breakpoints.apply(e)})})};var l=s.handlers={};r.onMessage=function(t,e){var n={source:t.source,origin:t.origin,data:t.data},a=l[n.data.task];a?e.initPromise=e.initPromise.then(function(){return a(e,n)}):n.data.task&&console.warn("Supplied task attribute not recognized",n.data)},r.clonePoints=function(t){for(var e,n=[],a=0;a<t.length;a++)e=t[a],n[a]={data:e.data,curveNumber:e.curveNumber,pointNumber:e.pointNumber,x:e.x,y:e.y};return n},r.sendData=function(){this.graphDiv._context.sendData=!0,Plotly.Plots.addLinks(this.graphDiv)},r.afterReady=function(t){return this.readyPromise=this.readyPromise.then(t),this.readyPromise},l.newPlot=function(t,e){return t.afterReady(function(){t.sendData(),Plotly.newPlot(t.graphDiv,e.data.data,e.data.layout)})},l.restyle=function(t,e){return t.afterReady(function(){t.sendData(),Plotly.restyle(t.graphDiv,e.data.update,null,e.data.indices)})},l.relayout=function(t,e){var n,a=e.data.update;if(t.isReady)n=Plotly.relayout(t.graphDiv,a).then(function(){if(a.autosize||a.width||a.height)return Plotly.Breakpoints.apply(t.graphDiv)});else{var i=t.layout;Object.keys(a).forEach(function(t){Plotly.Lib.nestedProperty(i,t).set(a[t])})}return!1!==e.data.sendData&&t.afterReady(function(){t.sendData()}),n},l.hover=function(t,e){return t.afterReady(function(){Plotly.Fx.hover(t.graphDiv,e.data.selection,e.data.subplot)})},l.listen=function(o,r){return o.afterReady(function(){var t=o.graphDiv,e=function(){s.postRanges(o,r)},n=function(t){s.postPoints("hover",t,r)},a=function(t){s.postPoints("unhover",t,r)},i=function(t){s.postPoints("click",t,r)};t.removeListener("plotly_relayout",e),t.removeListener("plotly_hover",n),t.removeListener("plotly_unhover",a),t.removeListener("plotly_click",i),-1!==r.data.events.indexOf("zoom")&&t.on("plotly_relayout",e),-1!==r.data.events.indexOf("hover")&&(t.on("plotly_hover",n),t.on("plotly_unhover",a)),-1!==r.data.events.indexOf("click")&&t.on("plotly_click",i)})},l.addTraces=function(t,e){return t.afterReady(function(){t.sendData(),Plotly.addTraces(t.graphDiv,e.data.traces,e.data.newIndices)})},l.deleteTraces=function(t,e){return t.afterReady(function(){t.sendData(),Plotly.deleteTraces(t.graphDiv,e.data.indices)})},l.moveTraces=function(t,e){return t.afterReady(function(){t.sendData(),Plotly.moveTraces(t.graphDiv,e.data.currentIndices,e.data.newIndices)})},l.extendTraces=function(e,n){return e.afterReady(function(){var t=n.data;Plotly.extendTraces(e.graphDiv,t.update,t.indices,t.maxPoints)})},l.getLayout=function(t,e){var n=t.getLayout();n.width&&n.height||!e.data.layout||(o.select("#plot-width").text(e.data.layout.width),o.select("#plot-height").text(e.data.layout.height),o.select("#plot-autosize").text("true"),n=t.getLayout()),s.postMessage(e,{layout:n,id:e.data.id})},l.getInitialSize=function(t,e){s.postMessage(e,{id:e.data.id,initialSize:{width:t.initialWidth,height:t.initialHeight,autosize:t.initialAutosize}})},l.getAttributes=function(o,r){return o.afterReady(function(){var t,e,n,a,i={};if(n=Plotly.Plots.graphJson(o.graphDiv,!1,null,"object",!0),e="string"==typeof r.data.attributes?[r.data.attributes]:r.data.attributes||["data","layout"],Array.isArray(e))for(a=0;a<e.length;a++)t=Plotly.Lib.nestedProperty(n,e[a]).get(),i[e[a]]=t;else i=n;s.postMessage(r,{task:"getAttributes",response:i})})},l.setAutosize=function(t,e){t.layout.autosize=!!e.data.value},l.ping=function(t,e){s.postMessage(e,{pong:!0})},l.redraw=function(t){if(t.isReady)return Plotly.redraw(t.graphDiv)},s.postRanges=function(t,e){var n={type:"zoom",ranges:{}};Plotly.Axes.list(t.graphDiv).forEach(function(t){n.ranges[t._id]=t.range.map(t.l2c)}),s.postMessage(e,n)},s.postPoints=function(t,e,n){var a={type:t,points:r.clonePoints(e.points)};s.postMessage(n,a)},s.postMessage=function(t,e){t.source.postMessage(e,t.origin)}}(ENV,window);